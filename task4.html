<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>JS Music Player</title>
  <style>
    :root{
      --bg:#0d1220; --panel:#151b31; --border:#242c53; --text:#e8ecff; --muted:#aab3de;
      --brand:#6c8cff;
    }
    *{box-sizing:border-box}
    body{margin:0; background:var(--bg); color:var(--text); font:16px/1.6 system-ui,Segoe UI,Roboto,Arial}
    .wrap{max-width:900px; margin:32px auto; padding:0 16px; display:grid; gap:20px}
    .player{
      display:grid; grid-template-columns:280px 1fr; gap:20px;
    }
    .panel{
      background:var(--panel); border:1px solid var(--border); border-radius:18px; padding:16px;
      box-shadow:0 10px 30px rgba(0,0,0,.25);
    }
    .cover{
      width:100%; aspect-ratio:1/1; border-radius:12px; object-fit:cover; border:1px solid var(--border)
    }
    h1{margin:0 0 8px; font-size:20px}
    .meta{color:var(--muted); margin-top:2px}
    .controls{display:flex; align-items:center; gap:10px; flex-wrap:wrap; margin-top:12px}
    button{
      border:0; border-radius:12px; padding:10px 14px; background:#1b2242; color:#e8ecff; cursor:pointer;
      transition:transform .15s ease, background .15s ease;
    }
    button:hover{transform:translateY(-1px); background:#212a54}
    .range{width:100%}
    .time{display:flex; justify-content:space-between; color:var(--muted); font-variant-tabular-nums:tabular-nums}
    .playlist{list-style:none; padding:0; margin:0; display:grid; gap:8px; max-height:360px; overflow:auto}
    .playlist li{
      padding:10px 12px; background:#111732; border:1px solid var(--border); border-radius:12px; cursor:pointer;
      display:flex; justify-content:space-between; align-items:center; gap:10px;
    }
    .playlist li.active{outline:2px solid var(--brand)}
    .small{color:var(--muted); font-size:13px}
    @media (max-width:820px){ .player{grid-template-columns:1fr} }
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Music Player</h1>
      <p class="small">Play, pause, next/prev, seek, volume, playlist & autoplay next.</p>
    </header>

    <section class="player">
      <!-- Left: Now Playing -->
      <div class="panel">
        <img id="cover" class="cover" src="https://picsum.photos/seed/cover/800" alt="Cover">
        <h1 id="title">—</h1>
        <div id="artist" class="meta">—</div>

        <div class="controls">
          <button id="prev">⏮ Prev</button>
          <button id="play">▶️ Play</button>
          <button id="next">⏭ Next</button>
          <label class="small" for="volume">Volume</label>
          <input id="volume" class="range" type="range" min="0" max="1" step="0.01" value="0.8">
        </div>

        <div class="time">
          <span id="current">0:00</span>
          <span id="duration">0:00</span>
        </div>
        <input id="seek" class="range" type="range" min="0" max="100" value="0">
      </div>

      <!-- Right: Playlist -->
      <div class="panel">
        <ul id="playlist" class="playlist"></ul>
      </div>
    </section>
  </div>

  <audio id="audio" preload="metadata"></audio>

  <script>
    // === Playlist data (update the src paths to your files) ===
    const tracks = [
      { title: "Dreamscape", artist: "A. Artist", src: "songs/song1.mp3", cover: "https://picsum.photos/seed/track1/800" },
      { title: "Night Drive", artist: "B. Beats",  src: "songs/song2.mp3", cover: "https://picsum.photos/seed/track2/800" },
      { title: "Sunrise",    artist: "C. Chords", src: "songs/song3.mp3", cover: "https://picsum.photos/seed/track3/800" },
    ];

    // === DOM refs ===
    const audio   = document.getElementById('audio');
    const cover   = document.getElementById('cover');
    const titleEl = document.getElementById('title');
    const artistEl= document.getElementById('artist');
    const playBtn = document.getElementById('play');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');
    const volume  = document.getElementById('volume');
    const seek    = document.getElementById('seek');
    const current = document.getElementById('current');
    const duration= document.getElementById('duration');
    const playlist= document.getElementById('playlist');

    // === State ===
    let index = 0;
    let isPlaying = false;

    // === Helpers ===
    const fmt = (s) => {
      if (isNaN(s)) return "0:00";
      const m = Math.floor(s / 60);
      const ss = Math.floor(s % 60).toString().padStart(2,'0');
      return `${m}:${ss}`;
    };

    function loadTrack(i){
      index = (i + tracks.length) % tracks.length;
      const t = tracks[index];
      audio.src = t.src;
      titleEl.textContent = t.title;
      artistEl.textContent = t.artist;
      cover.src = t.cover;
      highlightActive();
    }

    function highlightActive(){
      [...playlist.children].forEach((li, i) => {
        li.classList.toggle('active', i === index);
      });
    }

    async function play(){
      try{
        await audio.play();
        isPlaying = true;
        playBtn.textContent = "⏸ Pause";
      }catch(e){
        console.error(e);
      }
    }
    function pause(){
      audio.pause();
      isPlaying = false;
      playBtn.textContent = "▶️ Play";
    }
    function toggle(){ isPlaying ? pause() : play(); }
    function prev(){ loadTrack(index - 1); play(); }
    function next(){ loadTrack(index + 1); play(); }

    // === Build playlist UI ===
    tracks.forEach((t, i) => {
      const li = document.createElement('li');
      li.innerHTML = `<div><strong>${t.title}</strong><div class="small">${t.artist}</div></div><span class="small">▶</span>`;
      li.addEventListener('click', () => { loadTrack(i); play(); });
      playlist.appendChild(li);
    });

    // === Events ===
    playBtn.addEventListener('click', toggle);
    prevBtn.addEventListener('click', prev);
    nextBtn.addEventListener('click', next);

    volume.addEventListener('input', () => audio.volume = volume.value);

    // Seek bar update
    audio.addEventListener('timeupdate', () => {
      seek.value = (audio.currentTime / (audio.duration || 1)) * 100;
      current.textContent = fmt(audio.currentTime);
    });
    // Seek bar change (user scrubs)
    seek.addEventListener('input', () => {
      audio.currentTime = (seek.value / 100) * (audio.duration || 0);
    });

    // Duration once metadata is loaded
    audio.addEventListener('loadedmetadata', () => {
      duration.textContent = fmt(audio.duration);
    });

    // Autoplay next on end
    audio.addEventListener('ended', next);

    // Keyboard: space to play/pause
    window.addEventListener('keydown', (e) => {
      if (e.code === 'Space'){ e.preventDefault(); toggle(); }
      if (e.code === 'ArrowRight'){ next(); }
      if (e.code === 'ArrowLeft'){ prev(); }
    });

    // Init
    loadTrack(0);
  </script>
</body>
</html>
